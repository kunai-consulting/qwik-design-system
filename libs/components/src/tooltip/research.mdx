# Tooltip Research

## Overview

A **Tooltip** is a non-modal, floating label that provides brief, contextual information about an element when the user hovers, focuses, or touches it.
Tooltips should be accessible, non-intrusive, and never trap focus. They are typically used for icons, buttons, or form fields to clarify their purpose.

---

## Research Links

- [Radix UI Tooltip](https://www.radix-ui.com/primitives/docs/components/tooltip)
- [Ark UI Tooltip](https://ark-ui.com/docs/components/tooltip)
- [Kobalte Tooltip](https://kobalte.dev/docs/core/components/tooltip)
- [Base UI Tooltip](https://base-ui.com/react/components/tooltip)
- [Chrome: Declarative Popovers](https://developer.chrome.com/blog/web-at-io25#2_declarative_popovers_introducing_the_new_interest_invoker_api)
- [Open UI Popover/Hint Research](https://open-ui.org/components/popover-hint.research.explainer/)
- [CSS Anchor Positioning](https://anchor-positioning.oddbird.net/)

---

## Features

- [ ] Headless (no styles, only logic and ARIA)
- [ ] Opens on hover, focus, or programmatically
- [ ] Closes on blur, mouse leave, Escape, or trigger activation
- [ ] Configurable open/close delay
- [ ] Supports controlled and uncontrolled usage
- [ ] Supports pointer, keyboard, and touch
- [ ] Proper ARIA roles and attributes
- [ ] Portal support (renders in body)
- [ ] Arrow indicator (optional)
- [ ] Anchor positioning (CSS or JS)
- [ ] RTL support
- [ ] Animation support (via data attributes)
- [ ] Customizable placement and offset
- [ ] Accessible: never traps focus, never receives focus itself

---

## Component Structure

- **Root** (manages state)
- **Trigger** (the element that shows the tooltip)
- **Content** (the floating label)
- **Arrow** (optional, visual pointer)

---

## Keyboard & Accessibility

- **Tab/Shift+Tab:** Shows tooltip on focus, hides on blur
- **Escape:** Hides tooltip if open
- **Enter/Space:** Activates the trigger, hides tooltip
- **ARIA roles:**  
  - `role="tooltip"` on content  
  - `aria-describedby` on trigger, referencing tooltip content ID  
  - `aria-disabled` if trigger is disabled

**Tooltip content should never be focusable or trap focus.**

---

## Attributes & Data Attributes

- `role="tooltip"` (content)
- `aria-describedby` (trigger references content)
- `aria-disabled` (trigger, if disabled)
- `data-state="open" | "closed" | "closing" | "opening"`
- `data-side="top" | "right" | "bottom" | "left"`
- `data-align="start" | "center" | "end"`
- `data-tooltip-root`
- `data-tooltip-trigger`
- `data-tooltip-content`
- `data-tooltip-arrow`

---

## Use Cases

- Icon buttons
- Form fields
- Abbreviations/acronyms
- Truncated text
- Data visualizations
- Navigation items

---

## API Design

### Root

```tsx
interface TooltipRootProps {
  open?: boolean;
  defaultOpen?: boolean;
  onOpenChange$?: (open: boolean) => void;
  delayDuration?: number;
  disableHoverableContent?: boolean;
}
```

### Trigger

```tsx
interface TooltipTriggerProps {
  asChild?: boolean;
}
```

### Content

```tsx
interface TooltipContentProps {
  asChild?: boolean;
  side?: "top" | "right" | "bottom" | "left";
  sideOffset?: number;
  align?: "start" | "center" | "end";
  alignOffset?: number;
  avoidCollisions?: boolean;
  collisionBoundary?: Element | Element[];
  collisionPadding?: number;
  arrowPadding?: number;
  sticky?: "partial" | "always";
  hideWhenDetached?: boolean;
  forceMount?: boolean;
  ariaLabel?: string;
}
```

### Arrow

```tsx
interface TooltipArrowProps {
  width?: number;
  height?: number;
  asChild?: boolean;
}
```

---

## Example Usage

```tsx
<TooltipProvider delayDuration={500}>
  <TooltipRoot>
    <TooltipTrigger asChild>
      <button aria-label="Add to library">
        <PlusIcon />
      </button>
    </TooltipTrigger>
    <TooltipContent side="top" sideOffset={8}>
      Add to library
      <TooltipArrow />
    </TooltipContent>
  </TooltipRoot>
</TooltipProvider>
```

---

## Positioning

- **CSS Anchor Positioning** is preferred if available ([MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/anchor)), otherwise fallback to JS positioning.
- Use `side`, `align`, and `offset` props for placement.
- Use portal to render content in `body` for stacking context.

---

## Accessibility

- Tooltip content must have `role="tooltip"`.
- Trigger must have `aria-describedby` referencing the tooltip content.
- Tooltip must not be focusable or trap focus.
- Should not interfere with screen reader navigation.
